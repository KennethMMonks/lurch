<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Input Structures - Lurch Deductive Engine Documentation</title>
        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        <script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/highlight.pack.js"></script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="..">Lurch Deductive Engine Documentation</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                    <li >
                        <a href="..">Home</a>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Design Plans <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../design-overview/">Overview</a>
</li>
                            
<li >
    <a href="../phase1-structures/">Phase 1, Structures</a>
</li>
                            
<li >
    <a href="../phase2-input-tree/">Phase 2, The Input Tree</a>
</li>
                            
<li >
    <a href="../phase3-output-tree/">Phase 3, The Output Tree</a>
</li>
                            
<li >
    <a href="../phase4-modification/">Phase 4, Modification</a>
</li>
                            
<li >
    <a href="../phase5-interpretation/">Phase 5, Interpretation</a>
</li>
                            
<li >
    <a href="../phase6-labels/">Phase 6, Labels</a>
</li>
                            
<li >
    <a href="../phase7-validation/">Phase 7, Validation</a>
</li>
                            
<li >
    <a href="../phase8-expressions-and-rules/">Phase 8, Expressions and Rules</a>
</li>
                            
<li >
    <a href="../enhancements/">Enhancements for Later</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">API Documentation <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../api-overview/">Overview</a>
</li>
                            
<li >
    <a href="../api-lde/">The LDE</a>
</li>
                            
<li >
    <a href="../api-structures/">Structures</a>
</li>
                            
<li class="active">
    <a href="./">Input Structures</a>
</li>
                            
<li >
    <a href="../api-output-structures/">Output Structures</a>
</li>
                            
<li >
    <a href="../api-phases/">Phases of processing</a>
</li>
                        </ul>
                    </li>
                </ul>

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                    <li >
                        <a rel="next" href="../api-structures/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../api-output-structures/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
            </ul>
        </div>
    </div>
</div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#api-documentation-for-the-inputstructure-class-and-its-subclasses">API Documentation for the InputStructure Class and its Subclasses</a></li>
            <li><a href="#source-code">Source Code</a></li>
            <li><a href="#purpose">Purpose</a></li>
            <li><a href="#the-inputstructure-class">The InputStructure class</a></li>
            <li><a href="#the-inputexpression-class">The InputExpression class</a></li>
            <li><a href="#the-inputmodifier-class">The InputModifier class</a></li>
            <li><a href="#the-basicinputmodifier-class">The BasicInputModifier class</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="api-documentation-for-the-inputstructure-class-and-its-subclasses">API Documentation for the <code>InputStructure</code> Class and its Subclasses</h1>
<h2 id="source-code">Source Code</h2>
<ul>
<li><a href="https://github.com/lurchmath/lde/blob/master/src/input-structure.litcoffee">The <code>InputStructure</code> class</a></li>
<li><a href="https://github.com/lurchmath/lde/blob/master/tests/input-structure-spec.litcoffee">Unit tests of the <code>InputStructure</code> class</a></li>
</ul>
<h2 id="purpose">Purpose</h2>
<p>For information on the generic notion of Structures, see
<a href="../api-structures/">the API documentation for the base <code>Structure</code> class</a>.
That explains not only the concepts common to all Structures, but also how
<code>InputStructure</code>s fit into the bigger picture.</p>
<p>In this file, we cover the details specific to the <code>InputStructure</code> subclass
as well as its subclasses.  We break this document into sections, one for
each subclass of <code>InputStructure</code>, including <code>InputStructure</code> itself.</p>
<h2 id="the-inputstructure-class">The <code>InputStructure</code> class</h2>
<p>This class overrides none of the methods of its superclass, so you can refer
to <a href="../api-structures/">the superclass API documentation</a> for information
about many of the class's features.  It adds the following features.</p>
<h3 id="dirtyclean-status">Dirty/Clean Status</h3>
<p>In the Input Tree, the <code>dirty</code> flag of an <code>InputStructure</code> signifies whether
that node in the tree needs to be reinterpreted (i.e., has changed since its
last interpretation, or something else that's relevant changed since its
last interpretation).  Because the interpretation of parent nodes is
dependent on the interpretation of child nodes, if a node is marked dirty,
its parent should be as well (and so on, up the ancestor chain).</p>
<p>Thus the <code>InputStructure</code> class provides a <code>markDirty(yesOrNo)</code> function to
guarantee this property.  If you call it with a false argument (to mark the
Structure clean) then it operates on only the Structure in which you called
it.  But if you call it with a true argument, then it recursively continues
up the ancestor chain, marking the whole chain dirty.</p>
<p>The same <code>isDirty()</code> function from the <code>Structure</code> base class remains
available, unchanged.</p>
<h3 id="feedback">Feedback</h3>
<p>To make it easy to give feedback about <code>InputStructure</code> instances, we
provide an instance method called <code>feedback()</code>.  You can call
<code>X.feedback(Y)</code> in any <code>InputStructure</code> <code>X</code>, passing any JSON object <code>Y</code>
containing the feedback you wish to send, and it will add <code>X.id()</code> as the
<code>subject</code> field of <code>Y</code>, then call the LDE's global feedback function to
transmit <code>Y</code> to the client.</p>
<p>This transmission takes different forms depending on the client.  See the
<a href="../api-lde/#receiving-feedback">relevant section in the LDE API documentation</a>.</p>
<h2 id="the-inputexpression-class">The <code>InputExpression</code> class</h2>
<p>An <code>InputExpression</code> is the type of <code>InputStructure</code> that the LDE will
interpret into meaningful content in its Output Tree.  This is the first of
two <code>InputStructure</code> subclasses.  They are intended to be the <em>only</em> two
<code>InputStructure</code> subclasses; most other things should be subclasses of one
of these two.</p>
<p><code>InputExpression</code>s are what we typically think of as the meaningful things
in the Input Tree.  They will have interpretation routines that will
produce nodes in the Output Tree.</p>
<p>To do their job, they have the following features.  (Some of these make more
sense if you've skipped ahead and read the purpose of <code>InputModifier</code>s
first.)</p>
<ul>
<li>An <code>updateData()</code> function, which imports from any <code>InputModifier</code>
   connected to the expression all the data that such a modifier wishes to
   import, by calling <code>updateDataIn()</code> in the modifier, passing the
   expression as parameter.</li>
<li>Several functions for tracking which attributes of the expression were
   written by modifiers.  (See the miscellaneous technical details
   documented in <a href="https://github.com/lurchmath/lde/blob/master/src/input-structure.litcoffee#expression-specific-functionality">the relevant section of the source code</a>.)</li>
<li>Three convenience functions to make it easier for <code>InputModifier</code>
   instances to implement their <code>updateDataIn()</code> functions without causing
   collisions or overwriting of data in expressions.  See the documentation
   in <a href="https://github.com/lurchmath/lde/blob/master/src/input-structure.litcoffee#convenience-functions-for-inputmodifiers">the relevant section of the source code</a>.</li>
</ul>
<h2 id="the-inputmodifier-class">The <code>InputModifier</code> class</h2>
<p>An <code>InputModifier</code> is the type of <code>InputStructure</code> that will modify
<code>InputExpression</code>s, and thus impact how they are interpreted.  It does not
directly have an interpretation in the Output Tree itself, but only impacts
the interpretation of zero or more <code>InputExpression</code>s.</p>
<p>To support that, they have this functionality:</p>
<ul>
<li>An overridden constructor and <code>insertChild()</code> routine that prevent adding
   children to an <code>InputModifier</code> instance.</li>
<li>Default (noop) implementations of <code>updateConnections()</code> and
   <code>updateDataIn()</code> that subclasses can override.</li>
</ul>
<p>The most common way to use this class will probably be to instead use the
following simple subclass.</p>
<h2 id="the-basicinputmodifier-class">The <code>BasicInputModifier</code> class</h2>
<p>The most common purpose of modifiers is probably going to be embedding
attributes into their targets.  To that end, we provide a class that does
exactly that.</p>
<p>It contains support for calling any of the three convenience functions that
expressions expose to modifiers: <code>setSingleValue</code>, <code>addListItem</code>, and
<code>addSetElement</code>.  The data for these calls can be given at construction time
so that one need not subclass this further to get the desired functionality,
but can just instantiate it instead.</p>
<p>Here is an example:</p>
<pre><code class="javascript">var example = new BasicInputModifier(
    [ 'color', 'red', 'setSingleValue' ],
    [ 'brother', 'Steve', 'addSetElement' ],
    [ 'brother', 'Eric', 'addSetElement' ]
);
example.updateDataIn( expression );
// does all of the following:
// expression.setSingleValue( 'color', 'red' );
// expression.addSetElement( 'brother', 'Steve' );
// expression.addSetElement( 'brother', 'Eric' );
</code></pre></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>var base_url = '..';</script>
        <script src="../js/base.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script src="../search/require.js"></script>
        <script src="../search/search.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td><kbd>&larr;</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td><kbd>&rarr;</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>


    </body>
</html>

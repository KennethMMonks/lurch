<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Phase 4, Validation - Lurch Deductive Engine Documentation</title>
        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        <script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/highlight.pack.js"></script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="..">Lurch Deductive Engine Documentation</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                    <li >
                        <a href="..">Home</a>
                    </li>
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Design Plans <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../design-overview/">Overview</a>
</li>
                            
<li >
    <a href="../phase1-structures/">Phase 1, Structures</a>
</li>
                            
<li >
    <a href="../phase2-input-tree/">Phase 2, The Input Tree</a>
</li>
                            
<li >
    <a href="../phase3-interpretation/">Phase 3, Interpretation</a>
</li>
                            
<li class="active">
    <a href="./">Phase 4, Validation</a>
</li>
                            
<li >
    <a href="../phase5-labels/">Phase 5, Labels</a>
</li>
                            
<li >
    <a href="../phase6-expressions/">Phase 6, Expressions</a>
</li>
                            
<li >
    <a href="../phase7-citations/">Phase 7, Citations</a>
</li>
                            
<li >
    <a href="../phase8-validating-steps/">Phase 8, Validating Steps</a>
</li>
                            
<li >
    <a href="../phaseN-archive/">Phase N, List of outdated phases</a>
</li>
                            
<li >
    <a href="../enhancements/">Enhancements for Later</a>
</li>
                            
<li >
    <a href="../ideas/">Ideas Archive</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">API Documentation <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../api-overview/">Overview</a>
</li>
                            
<li >
    <a href="../api-lde/">The LDE</a>
</li>
                            
<li >
    <a href="../api-structures/">Structures</a>
</li>
                        </ul>
                    </li>
                </ul>

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                    <li >
                        <a rel="next" href="../phase3-interpretation/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../phase5-labels/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
            </ul>
        </div>
    </div>
</div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#lde-design-phase-4-validation">LDE Design Phase 4: Validation</a></li>
            <li><a href="#content">Content</a></li>
            <li><a href="#goal">Goal</a></li>
            <li><a href="#status">Status</a></li>
            <li><a href="#automatic-validation-enqueueing">Automatic validation enqueueing</a></li>
            <li><a href="#automatic-validation-processing">Automatic validation processing</a></li>
            <li><a href="#feedback-messages">Feedback messages</a></li>
            <li><a href="#conclusions">Conclusions</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<p>We have designed the work on the Lurch Deductive Engine (LDE) to progress in
phases.  The idea is that each phase ends with a completed whole that can be
tested in that state, and that provides more features than the previous
state did.  By the time the final phase is complete, the LDE will be a
robust and useful product.</p>
<h1 id="lde-design-phase-4-validation">LDE Design Phase 4: Validation</h1>
<h2 id="content">Content</h2>
<p>In this phase, we extend the formerly rudimentary <code>OutputStructure</code> class
with its most important functionality: validating steps of work.</p>
<h2 id="goal">Goal</h2>
<p>Instance of the <code>OutputStructure</code> class will automatically validate
themselves as they are added to the Output Tree.</p>
<h2 id="status">Status</h2>
<p>This has not been implemented.  See the tasks below.</p>
<h2 id="automatic-validation-enqueueing">Automatic validation enqueueing</h2>
<ul class="task-list">
<li class="task-list-item"><input type="checkbox" disabled/> Define a class variable in the <code>OutputStructure</code> class, an array of
   all instances that need to be validated.  Initialize it to the empty
   array.</li>
<li class="task-list-item"><input type="checkbox" disabled/> Extend the <code>recursiveInterpret</code> routine so that, for any
   <code>OutputStructure</code> instances it had to create (not just re-use from its
   cache), if any of them are also <code>OutputStep</code> instances, then add them to
   the to-validate list.  (The <code>OutputStep</code> class does not yet exist.  Make
   it a stub for now, and come back to fully implementing it in
   <a href="../phase7-citations/">phase 7</a>.)</li>
<li class="task-list-item"><input type="checkbox" disabled/> Add documentation in those files describing the changes just made.</li>
<li class="task-list-item"><input type="checkbox" disabled/> Extend the unit tests for the <code>InputStructure</code> module to verify
   that this works as described.</li>
<li class="task-list-item"><input type="checkbox" disabled/> Add documentation in that test file describing the changes just made.</li>
<li class="task-list-item"><input type="checkbox" disabled/> Once the unit tests pass, build everything and commit.</li>
</ul>
<h2 id="automatic-validation-processing">Automatic validation processing</h2>
<ul class="task-list">
<li class="task-list-item"><input type="checkbox" disabled/> In the LDE module, run <code>setInterval()</code> at module creation so that it
   regularly (many times per second, but not so often as to consume copious
   CPU) checks to see if there is anything on the list of <code>OutputStructure</code>
   instances to be validated.  If there are any such things, call their
   <code>validate</code> routines (which are asynchronous).  The order in which these
   are processed is irrelevant.</li>
<li class="task-list-item"><input type="checkbox" disabled/> Add documentation in that file describing the changes just made.</li>
<li class="task-list-item"><input type="checkbox" disabled/> Extend the unit tests for the LDE module to verify that this works
   as described.  That is, create some <code>OutputStep</code> subclasses and some
   <code>InputStructure</code> subclasses whose <code>interpret</code> routines produce instances
   of those classes.  Verify that validation actually does take place.</li>
<li class="task-list-item"><input type="checkbox" disabled/> Add documentation in that test file describing the changes just made.</li>
<li class="task-list-item"><input type="checkbox" disabled/> Once the unit tests pass, build everything and commit.</li>
</ul>
<h2 id="feedback-messages">Feedback messages</h2>
<ul class="task-list">
<li class="task-list-item"><input type="checkbox" disabled/> Add a function to the LDE module that can be called whenever an
   attribute of an <code>OutputStructure</code> in the Output Tree changes, and the
   function will send a message (to any listening client) containing the ID
   of the origin of the node whose attribute changed, and the key-value pair
   of the changed attribute.</li>
<li class="task-list-item"><input type="checkbox" disabled/> Update the documentation in that file to describe the changes just
   made.</li>
<li class="task-list-item"><input type="checkbox" disabled/> Extend the unit tests for the LDE module to verify that this
   works as described.  First, simply, just change an attribute of some
   nodes in the Output Tree and verify that messages are sent by the LDE to
   that effect.  Then extend the tests that go from API calls to validation
   results to ensure that the entire process works, from API calls that add
   to the Input Tree to feedback messages from validation being transmitted
   back.</li>
<li class="task-list-item"><input type="checkbox" disabled/> Add documentation in that test file describing the changes just made.</li>
<li class="task-list-item"><input type="checkbox" disabled/> Once the unit tests pass, build everything and commit.</li>
</ul>
<h2 id="conclusions">Conclusions</h2>
<p>We now stipulate and prove a few facts about the preceding design.</p>
<p><strong>Axiom 1:</strong> Lurch creates an <code>InputStructure</code> from a portion of the user's
document iff that portion is meaningful.</p>
<p><strong>Remark:</strong> This is the job of the UI, with the assistance of the user's
settings.  So in some sense this axiom is aspirational, or conditioned upon
the assumption that we can provide a robust enough set of UI settings to
capture user meaning correctly.</p>
<p><strong>Axiom 2:</strong> Lurch performs interpretation on every <code>InputStructure</code>
created by the UI, and on nothing else.</p>
<p><strong>Remark:</strong> The design so far has included this as an obvious goal.  Here
we just explicitly state it.</p>
<p><strong>Theorem 1:</strong> Lurch does syntactic validation on X iff X corresponds to a piece of meaningful content in the user's document.</p>
<p><strong>Proof:</strong> Syntactic validation is a part of interpretation, which by Axiom
2 gets applied to every <code>InputStructure</code>, and to nothing else.  By Axiom 1,
those <code>InputStructure</code>s correspond directly to the meaningful content in
the user's document.  QED</p>
<p><strong>Axiom 3:</strong> Both the creation and interpretation of <code>InputStructure</code>s faithfully preserve meaning.</p>
<p><strong>Remark:</strong> That is, neither the UI nor the interpretation phase will
convert a premise into a rule, or a grammar rule into a subproof, or any
other crazy change of meaning.  This is simply a commitment for us to design
Lurch to do what seems mathematically normal and natural to mathematicians
and math students, as human users of the software.  It's a bit strange to
even state this rather obvious axiom, but it is needed in the proof of
Theorem 2.</p>
<p><strong>Theorem 2:</strong> Lurch does semantic validation on X iff X corresponds to a
syntactically valid step of work in the user's document.</p>
<p><strong>Proof:</strong> Assume X is a syntactically valid step of work in the document.
Then by Axiom 1, it will become an <code>InputStructure</code>, and by Axiom 3, it
will more precisely have the type of data that lets the LDE know that it is
a step of work.  By Axiom 2, that step will be interpreted, and by Axiom 3,
the result will be an <code>OutputStep</code>.  That <code>OutputStep</code> will have syntactic
validation performed on it, because of the definition of validation
enqueueing given above.</p>
<p>In the other direction, assume Lurch does semantic validation on X.  Then by
the definition of validation enqueueing above, X must be an <code>OutputStep</code>.
Our design permits creation of <code>OutputStructure</code>s only through
interpretation, and by Axiom 3, the interpretation step that created X must
have taken as input some <code>InputStructure</code> that has all the data indicating
it is a step of work.  By Axiom 1, that must have come from some meaningful
portion of the user's document, and by Axiom 3, that in-document content
must have represented a step of work.  QED</p></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>var base_url = '..';</script>
        <script src="../js/base.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script src="../search/require.js"></script>
        <script src="../search/search.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td><kbd>&larr;</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td><kbd>&rarr;</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>


    </body>
</html>

var InputStructure,OutputStructure,Structure,extend=function(t,e){function r(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;"undefined"!=typeof require&&null!==require?(Structure=require("./structure").Structure,InputStructure=require("./input-structure").InputStructure):"undefined"!=typeof WorkerGlobalScope&&null!==WorkerGlobalScope?null==WorkerGlobalScope.Structure&&(importScripts("structure.js"),importScripts("input-structure.js")):null!=("undefined"!=typeof self&&null!==self?self.importScripts:void 0)&&null==self.Structure&&(importScripts("release/structure.js"),importScripts("release/input-structure.js")),OutputStructure=function(t){function e(){var t,r,n;e.__super__.constructor.apply(this,arguments),this.markDirty(),(r=null!=(n=(t=Structure.prototype.subclasses.InputStructure).prototype.instancesBeingInterpreted)?n.length:void 0)&&(this.origin=t.prototype.instancesBeingInterpreted[r-1])}return extend(e,Structure),e.prototype.className=Structure.addSubclass("OutputStructure",e),e.prototype.markDirty=function(t){return null==t&&(t=!0),this.dirty=t},e.prototype.addConnectionOrigin=function(t,r,n){var u,o,i;if(u=Structure.prototype.subclasses.InputStructure,r instanceof e&&(o=null!=(i=u.prototype.instancesBeingInterpreted)?i.length:void 0))return n._origin=u.prototype.instancesBeingInterpreted[o-1].id()},e.prototype.feedback=function(t){var e;return null!=(e=this.origin)?e.feedback(t):void 0},e.prototype.hasLabel=function(t){return!1},e.lookUpIn=function(t,e){var r,n,u,o;for(n=0,u=(o=e.slice(0).reverse()).length;n<u;n++)if((r=o[n]).hasLabel(t))return r},e.prototype.lookUp=function(t){return this.firstAccessible(function(e){return e.hasLabel(t)})},e.prototype.lookUpAll=function(t){return this.allAccessibles(function(e){return e.hasLabel(t)})},e.prototype.lookUpAllCitations=function(){var t,e,r,n,u,o,i,s,p,c,l,a,f,d,h,y,S,g,b;for(S={premises:{connections:[],labels:[]},reasons:{connections:[],labels:[]}},n=0,c=(d=this.getConnectionsOut()).length;n<c;n++)for(e=d[n],r=this.getConnectionData(e),u=0,l=(h=["premise","reason"]).length;u<l;u++)b=h[u],(null!=r?r.type:void 0)===b+" citation"&&null!=(g=this.getConnectionTarget(e))&&S[b+"s"].connections.push({cited:g.id(),id:e});for(o=0,a=(y=["premise","reason"]).length;o<a;o++)if(b=y[o],(p=this.getAttribute(b+" citations"))&&p instanceof Array)for(i=0,f=p.length;i<f;i++)s=p[i],null!=(t=this.lookUp(s))&&S[b+"s"].labels.push({cited:t.id(),label:s});return S},e.prototype.justChanged=function(){var t;return"function"==typeof(t=e.prototype).instanceJustChanged?t.instanceJustChanged(this):void 0},e}(),"undefined"!=typeof exports&&null!==exports&&(exports.OutputStructure=OutputStructure);
//# sourceMappingURL=output-structure.js.map

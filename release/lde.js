var InputStructure,InputTree,Structure,expectedArgumentCount,functions,isInTheInputTree,slice=[].slice;"undefined"!=typeof require&&null!==require?(Structure=require("./structure").Structure,InputStructure=require("./input-structure").InputStructure):"undefined"!=typeof WorkerGlobalScope&&null!==WorkerGlobalScope?(importScripts("structure.js"),importScripts("input-structure.js")):null!=("undefined"!=typeof self&&null!==self?self.importScripts:void 0)&&(importScripts("release/structure.js"),importScripts("release/input-structure.js")),(InputTree=(new InputStructure).attr({id:"root"})).trackIDs(),(functions={}).getInputTree=function(){return InputTree},isInTheInputTree=function(t){for(;t instanceof InputStructure;){if(t===InputTree)return!0;t=t.parent()}return!1},functions.insert=function(t,e,r){var u,n;if(null!=(n=Structure.instanceWithID(e))&&0<=r&&r<=n.children().length&&isInTheInputTree(n)&&null!=(u=Structure.fromJSON(t).setup())&&u instanceof InputStructure)return n.insertChild(u,r),u.trackIDs()},functions.delete=function(t){var e;if(null!=(e=Structure.instanceWithID(t))&&isInTheInputTree(e)&&e!==InputTree)return e.removeFromParent(),e.untrackIDs()},functions.replace=function(t,e){var r,u;if(null!=(u=Structure.instanceWithID(t))&&isInTheInputTree(u)&&u!==InputTree&&null!=(r=Structure.fromJSON(e).setup())&&r instanceof InputStructure)return u.replaceWith(r),u.untrackIDs(),r.trackIDs()},functions.setAttribute=function(t,e,r){var u;if(null!=(u=Structure.instanceWithID(t))&&isInTheInputTree(u)&&("id"===e&&u.untrackIDs(!1),void 0===r?u.clearAttributes(e):u.setAttribute(e,r),"id"===e))return u.trackIDs(!1)},("undefined"!=typeof WorkerGlobalScope&&null!==WorkerGlobalScope||null!=("undefined"!=typeof self&&null!==self?self.importScripts:void 0))&&(expectedArgumentCount={insert:3,delete:1,replace:2,setAttribute:3,getInputTree:0},self.addEventListener("message",function(t){var e,r,u;if(u=t.data,r=u[0],e=2<=u.length?slice.call(u,1):[],expectedArgumentCount[r]===e.length)return"getInputTree"===r?self.postMessage(functions.getInputTree().toJSON()):functions[r].apply(functions,e)})),"undefined"!=typeof exports&&null!==exports&&(exports.Structure=Structure,exports.InputStructure=InputStructure,exports.insert=functions.insert,exports.delete=functions.delete,exports.replace=functions.replace,exports.setAttribute=functions.setAttribute,exports.getInputTree=functions.getInputTree);
//# sourceMappingURL=lde.js.map

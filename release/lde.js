var LDEDocument,Structure,expectedArgumentCount,functions,isInTheDocument,slice=[].slice;"undefined"!=typeof require&&null!==require?Structure=require("./structure").Structure:"undefined"!=typeof WorkerGlobalScope&&null!==WorkerGlobalScope?(importScripts("structure.js"),importScripts("label.js"),importScripts("reason.js"),importScripts("formal-system.js"),importScripts("statement.js")):null!=("undefined"!=typeof self&&null!==self?self.importScripts:void 0)&&(importScripts("release/structure.js"),importScripts("release/label.js"),importScripts("release/reason.js"),importScripts("release/formal-system.js"),importScripts("release/statement.js")),(LDEDocument=(new Structure).attr({id:"root"})).trackIDs(),(functions={}).getDocument=function(){return LDEDocument},isInTheDocument=function(e){for(;e instanceof Structure;){if(e===LDEDocument)return!0;e=e.parent()}return!1},functions.insert=function(e,t,r){var n,u;if(null!=(u=Structure.instanceWithID(t))&&0<=r&&r<=u.children().length&&isInTheDocument(u)&&null!=(n=Structure.fromJSON(e).setup()))return u.insertChild(n,r),n.trackIDs()},functions.delete=function(e){var t;if(null!=(t=Structure.instanceWithID(e))&&isInTheDocument(t)&&t!==LDEDocument)return t.removeFromParent(),t.untrackIDs()},functions.replace=function(e,t){var r,n;if(null!=(n=Structure.instanceWithID(e))&&isInTheDocument(n)&&n!==LDEDocument&&null!=(r=Structure.fromJSON(t).setup()))return n.replaceWith(r),n.untrackIDs(),r.trackIDs()},functions.setAttribute=function(e,t,r){var n;if(null!=(n=Structure.instanceWithID(e))&&isInTheDocument(n)&&("id"===t&&n.untrackIDs(!1),n.setExternalAttribute(t,r),"id"===t))return n.trackIDs(!1)},("undefined"!=typeof WorkerGlobalScope&&null!==WorkerGlobalScope||null!=("undefined"!=typeof self&&null!==self?self.importScripts:void 0))&&(expectedArgumentCount={insert:3,delete:1,replace:2,setAttribute:3,getDocument:0},self.addEventListener("message",function(e){var t,r,n;if(n=e.data,r=n[0],t=2<=n.length?slice.call(n,1):[],expectedArgumentCount[r]===t.length)return"getDocument"===r?self.postMessage(functions.getDocument().toJSON()):functions[r].apply(functions,t)})),"undefined"!=typeof exports&&null!==exports&&(exports.Structure=Structure,exports.insert=functions.insert,exports.delete=functions.delete,exports.replace=functions.replace,exports.setAttribute=functions.setAttribute,exports.getDocument=functions.getDocument);
//# sourceMappingURL=lde.js.map

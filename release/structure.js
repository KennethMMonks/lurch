var Structure,bind=function(t,e){return function(){return t.apply(e,arguments)}},slice=[].slice,hasProp={}.hasOwnProperty;exports.Structure=Structure=function(){function t(){var e,i,n,r,s,o;for(n=1<=arguments.length?slice.call(arguments,0):[],this.fillOutConnections=bind(this.fillOutConnections,this),this.clearExternalAttributes=bind(this.clearExternalAttributes,this),this.setExternalAttribute=bind(this.setExternalAttribute,this),this.getExternalAttribute=bind(this.getExternalAttribute,this),this.compute=bind(this.compute,this),this.clearComputedAttributes=bind(this.clearComputedAttributes,this),this.setComputedAttribute=bind(this.setComputedAttribute,this),this.getComputedAttribute=bind(this.getComputedAttribute,this),this.replaceWith=bind(this.replaceWith,this),this.removeChild=bind(this.removeChild,this),this.removeFromParent=bind(this.removeFromParent,this),this.indexInParent=bind(this.indexInParent,this),this.children=bind(this.children,this),this.parent=bind(this.parent,this),this.releaseID=bind(this.releaseID,this),this.getID=bind(this.getID,this),this.computedAttributes={},this.externalAttributes={},this.parentNode=null,this.childList=function(){var i,r,s;for(s=[],i=0,r=n.length;i<r;i++)(e=n[i])instanceof t&&s.push(e);return s}(),r=0,s=(o=this.childList).length;r<s;r++)(i=o[r]).removeFromParent(),i.parentNode=this,"function"==typeof i.wasInserted&&i.wasInserted()}return t.prototype.IDs=[],t.instanceWithID=function(e){return t.prototype.IDs[e]},t.nextUnusedID=function(){var e;return(e=t.prototype.IDs.indexOf(null))>=0?e:t.prototype.IDs.length},t.prototype.getID=function(){if(null==this.ID)return this.ID=t.nextUnusedID(),t.prototype.IDs[this.ID]=this},t.prototype.releaseID=function(){var e;if(null!=this.ID){for(t.prototype.IDs[this.ID]=null,delete this.ID,e=[];null===t.prototype.IDs[t.prototype.IDs.length-1];)e.push(t.prototype.IDs.pop());return e}},t.prototype.parent=function(){return this.parentNode},t.prototype.children=function(){return this.childList.slice(0)},t.prototype.indexInParent=function(){var t,e;return null!=(t=this.parentNode)&&null!=(e=t.childList)?e.indexOf(this):void 0},t.prototype.removeFromParent=function(){var t,e;if(null!=(e=this.parentNode))return t=this.indexInParent(),this.parentNode.childList.splice(t,1),this.parentNode=null,"function"==typeof this.wasRemoved?this.wasRemoved(e,t):void 0},t.prototype.removeChild=function(t){var e;return null!=(e=this.childList[t])?e.removeFromParent():void 0},t.prototype.insertChild=function(e,i){if(null==i&&(i=0),e instanceof t&&0<=i&&i<=this.childList.length)return e.removeFromParent(),this.childList=slice.call(this.childList.slice(0,i)).concat([e],slice.call(this.childList.slice(i))),e.parentNode=this,"function"==typeof e.wasInserted?e.wasInserted():void 0},t.prototype.replaceWith=function(t){var e,i;if(null!=(i=this.parentNode))return e=this.indexInParent(),this.removeFromParent(),i.insertChild(t,e)},t.prototype.getComputedAttribute=function(t){return this.computedAttributes[t]},t.prototype.setComputedAttribute=function(t,e){if(this.computedAttributes[t]!==e)return this.computedAttributes[t]=e,"function"==typeof this.wasChanged?this.wasChanged():void 0},t.prototype.clearComputedAttributes=function(){var t,e,i,n,r;for(0===(i=1<=arguments.length?slice.call(arguments,0):[]).length&&(i=Object.keys(this.computedAttributes)),r=[],t=0,n=i.length;t<n;t++)(e=i[t])in this.computedAttributes?(delete this.computedAttributes[e],r.push("function"==typeof this.wasChanged?this.wasChanged():void 0)):r.push(void 0);return r},t.prototype.compute=function(){var t,e,i,n,r,s,o;for(o=[],n=0,r=(e=1<=arguments.length?slice.call(arguments,0):[]).length;n<r;n++)(t=e[n])instanceof Array||(t=[t]),i=t[0],s=2<=t.length?slice.call(t,1):[],o.push(this.setComputedAttribute(i,this[i].apply(this,s)));return o},t.prototype.getExternalAttribute=function(t){return this.externalAttributes[t]},t.prototype.setExternalAttribute=function(t,e){if(this.externalAttributes[t]!==e)return this.externalAttributes[t]=e,"function"==typeof this.wasChanged?this.wasChanged():void 0},t.prototype.clearExternalAttributes=function(){var t,e,i,n,r;for(0===(i=1<=arguments.length?slice.call(arguments,0):[]).length&&(i=Object.keys(this.externalAttributes)),r=[],t=0,n=i.length;t<n;t++)(e=i[t])in this.externalAttributes?(delete this.externalAttributes[e],r.push("function"==typeof this.wasChanged?this.wasChanged():void 0)):r.push(void 0);return r},t.prototype.fillOutConnections=function(){var e,i,n,r,s,o,h,l,u,a,c,p,d,f,b,I,m,A,y,g,v,x,D,C,P;for(o=0,h=(d=this.childList).length;o<h;o++)d[o].fillOutConnections();if(null!=this.ID){c=function(t){var e,i,n,r,s,o;r=[];for(s in t)if(hasProp.call(t,s)){i=t[s];for(o in i)if(hasProp.call(i,o))for(e=1,n=i[o];1<=n?e<=n:e>=n;1<=n?++e:--e)r.push([Number(s),o])}return r},p=(n=function(t){var e,i,n,r,s,o,h;for(s={},n=0,r=t.length;n<r;n++)o=(i=t[n])[0],h=i[1],null==s[o]&&(s[o]={}),null==(e=s[o])[h]&&(e[h]=0),s[o][h]++;return s})(null!=(f=this.getExternalAttribute("connectionsOut"))?f:[]);for(D in p)if(hasProp.call(p,D)&&(l=p[D],null!=(i=t.instanceWithID(D)))){null==(C=n(null!=(b=i.getExternalAttribute("connectionsIn"))?b:[]))[u=this.ID]&&(C[u]={});for(P in l)hasProp.call(l,P)&&(r=l[P],l[P]=C[this.ID][P]=Math.max(r,null!=(I=C[this.ID][P])?I:0));i.setExternalAttribute("connectionsIn",c(C))}s=n(null!=(m=this.getExternalAttribute("connectionsIn"))?m:[]),g=[];for(v in s)if(hasProp.call(s,v)&&(l=s[v],null!=(e=t.instanceWithID(v)))){null==(x=n(null!=(A=e.getExternalAttribute("connectionsOut"))?A:[]))[a=this.ID]&&(x[a]={});for(P in l)hasProp.call(l,P)&&(r=l[P],l[P]=x[this.ID][P]=Math.max(r,null!=(y=x[this.ID][P])?y:0));g.push(e.setExternalAttribute("connectionsOut",c(x)))}return g}},t}();
//# sourceMappingURL=structure.js.map
